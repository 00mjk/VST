#
# This script builds a VST distribution as a tgz file.
# To run it: 
# FIRST DO AN "svn commit" if necessary.
# THEN, from some place outside of an svn-checked-out directory,
#   sh  .../vst/util/PACKAGE
# the result will be in vst.tgz

svn co https://svn.princeton.edu/appel/vst --depth files
(cd vst; svn co https://svn.princeton.edu/appel/vst/compcert)
(cd vst; svn co https://svn.princeton.edu/appel/vst/msl)
(cd vst; svn co https://svn.princeton.edu/appel/vst/sepcomp --depth files)
(cd vst; svn co https://svn.princeton.edu/appel/vst/veric)
(cd vst; svn co https://svn.princeton.edu/appel/vst/floyd)
(cd vst; svn co https://svn.princeton.edu/appel/vst/progs)
(cd vst; svn co https://svn.princeton.edu/appel/vst/examples)
(cd vst; svn co https://svn.princeton.edu/appel/vst/util)
(cd vst; svn co https://svn.princeton.edu/appel/vst/doc --depth empty)
(cd vst/doc; svn update VerifiableC.pdf)
(cd vst; sh util/make_version)
rm -rf util vst/.svn vst/*/.svn
echo "COMPRESSING: tar cfz vst"-`cat vst/VERSION`".tgz vst"
tar cfz vst-`cat vst/VERSION`.tgz vst
rm -rf vst




